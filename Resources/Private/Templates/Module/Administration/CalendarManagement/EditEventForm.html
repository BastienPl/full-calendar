{namespace neos=TYPO3\Neos\ViewHelpers}
<f:layout name="BackendSubModule"/>

<f:section name="content">

    <script type="text/javascript" src="{f:uri.resource(path: 'JavaScript/lib/jquery-ui/jquery-ui.min.js', package:'Lsascha.FullCalendar')}"></script>
    <link href="{f:uri.resource(path: 'JavaScript/lib/jquery-ui/jquery-ui.min.css', package:'Lsascha.FullCalendar')}" rel="stylesheet" />
    <link href="{f:uri.resource(path: 'JavaScript/lib/jquery-ui/jquery-ui.structure.min.css', package:'Lsascha.FullCalendar')}" rel="stylesheet" />

    <f:render partial="Module\FlashMessage" arguments="{severityName: flashmessage}"/>

    <h2>Edit Event "{event.title}"</h2>


    <f:form action="saveEventForm" object="{event}" objectName="event">

        <div class="neos-row-fluid">
            <f:render partial="Module/Administration/CalendarManagement/Event/GeneralFields" />
        </div>

        <div class="neos-footer">
            <a href="javascript:window.close();" class="neos-button" title="Close Event">
                Close
            </a>

            <div class="neos-pull-right">
                <button type="submit" form="postHelper" formaction="{f:uri.action(action: 'deleteEventForm', arguments: {event: event})}" class="neos-button neos-button-danger" title="Delete Event"><i class="icon-trash icon-white"></i> Delete</button>
                
                <f:form.submit class="neos-button neos-button-primary" value="Save Event" />
            </div>
        </div>
    </f:form>
    <f:form action="editEventForm" id="postHelper" method="post"></f:form>

    <script type="text/javascript">
        <![CDATA[
        window.onunload = function (e) {
            opener.reloadevents();
        };
        ]]>
    </script>

</f:section>